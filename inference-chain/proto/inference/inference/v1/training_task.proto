syntax = "proto3";
package inference.inference;

option go_package = "github.com/productscience/inference/x/inference/types";

message TrainingTask {
  uint64 id = 1;
  string requested_by = 2;
  uint64 created_at_block_height = 3;
  string assigner = 4;
  uint64 claimed_by_assigner_at_block_height = 5;
  uint64 assigned_at_block_height = 6;
  uint64 finished_at_block_height = 7;
  repeated TrainingHardwareResources hardware_resources = 8;
  TrainingConfig config = 9;
  repeated TrainingTaskAssignee assignees = 10;
  EpochInfo epoch = 11;
}

message TrainingHardwareResources {
  string type = 1;
  uint32 count = 2;
}

message TrainingConfig {
  TrainingDatasets datasets = 1;
  uint32 num_uoc_estimation_steps = 2;
}

message TrainingDatasets {
  string train = 1;
  string test = 2;
}

message TrainingTaskAssignee {
  string participant = 1;
  repeated string node_ids = 2;
}

message EpochInfo {
  int32 last_epoch = 1;
  int64 last_epoch_block_height = 2;
  int64 last_epoch_timestamp = 3; // Equals to the block time
  bool  last_epoch_is_finished = 4;
}
